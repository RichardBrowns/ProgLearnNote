# 其他

## Postman

Postman 是一款功能强大的 API 开发工具，主要功能包括：

1. **发送请求**: 允许用户发送各种类型的 HTTP 请求，如 GET、POST、PUT、DELETE 等，以测试和调试 API。
2. **创建和管理请求集合**: 用户可以将相关请求组织成集合，便于管理和分享。
3. **测试和断言**: 提供了测试脚本的编写和运行功能，可以对请求的响应进行自动化测试，并根据预期结果做出断言。
4. **环境管理**: 允许用户定义不同的环境（如开发、测试、生产环境），并在请求中使用环境变量，方便在不同环境间切换。
5. **自动化集成测试**: 提供了集成测试功能，可以将多个请求组合成测试用例，并自动运行这些测试用例，验证整个 API 的功能和性能。
6. **监视和调试**: 用户可以查看请求和响应的详细信息，包括请求头、响应头、请求体和响应体等，方便调试和排查问题。
7. **Mock 服务器**: 允许用户创建虚拟的 Mock 服务器，模拟 API 的行为，方便前端和后端并行开发。
8. **协作和分享**: 提供了团队协作和分享功能，可以将请求集合和测试用例分享给团队成员，方便协作开发和测试。

### 接口管理

我们对一个或多个系统中的很多用例进行维护，即对用例进行分类管理。如下：

1. 点击Collection，点击+New Collection，在弹出的输入框中输入Collection名称（这个就可以理解为所测试的系统）
2. 选中新建的Collection右键，点击Add Folder ，在弹出对话框中输入文件夹名称（这个就可以理解为系统中的模块）
3. 选中新建的Folder，点击Add Request ，在弹出的对话框中输入请求名称，这个就是我们所测试的接口，也可以理解为测试用例 。

<img src="https://pic2.zhimg.com/v2-f5bd635b77c4e1891f9eb70459228505_r.jpg" alt="img" style="zoom:50%;" />

### 请求接口

![屏幕截图 2024-04-18 095121](C:\Users\richa\Pictures\Screenshots\屏幕截图 2024-04-18 095121.png)

**请求：**

- 请求方法：GET
- 请求URL：http://localhost/index.php?m=Home&c=User&a=do_login&t=0.21942974229794432
- 请求头：Content-Type：XXX
- 请求体：XXX=XXX&YYY=YYY

Postman支持多种请求体类型，具体取决于您的API的需求和配置。以下是常见的请求体类型：

- **Form-Data**: 用于向服务器发送表单数据，通常用于提交表单或文件上传。您可以通过Postman的“Body”选项选择“form-data”类型，并添加键值对参数。
- **x-www-form-urlencoded**: 类似于表单数据，但数据以键值对形式编码在请求的正文中。在Postman中，选择“x-www-form-urlencoded”类型，并添加键值对参数。
- **Raw**: 允许您直接输入原始数据，如JSON、XML或文本。在Postman中选择“Body”，然后选择“raw”类型，并在下拉菜单中选择相应的格式（如JSON）。
- **Binary**: 用于发送二进制数据，例如图像或音频文件。在Postman中，选择“Body”，然后选择“binary”类型，并上传您的文件。
- **GraphQL**: 专门用于发送GraphQL查询。在Postman中，选择“Body”，然后选择“GraphQL”类型，并输入您的GraphQL查询。
- **其他类型**: 根据您的需求，您可能还会遇到其他类型的请求体，如SOAP等。在Postman中，选择适合您需求的类型，并按需设置参数。

您可以根据您的API端点的要求选择适当的请求体类型，并在Postman中相应地设置请求体。

### 响应接口

![img](https://pic2.zhimg.com/80/v2-f857caac945ae316db943d49fb760659_1440w.webp)

**响应：**

- 状态行：Status：200 OK
- 响应头：Headers + Cookies，需要注意的是Cookies是包含在响应头中的，但是为了明显，工具会分开显示
- 响应体：Body

响应体类型通常是根据服务器返回的数据类型而确定的。Postman会根据接收到的响应自动识别响应体类型。以下是一些常见的响应体类型：

- **JSON**: 最常见的响应体类型之一，用于传输结构化数据，例如API响应。
- **XML**: 另一种常见的响应体类型，用于传输标记语言数据，如配置文件或数据交换。
- **HTML**: 用于传输网页内容的响应体类型，通常用于Web应用程序。
- **文本/纯文本**: 用于传输纯文本数据的响应体类型，例如文档或日志文件。
- **二进制数据**: 用于传输图像、音频、视频等二进制数据的响应体类型。
- **其他类型**: 根据服务器返回的数据内容，可能还会有其他自定义的响应体类型。

在Postman中，您可以通过查看响应的“Body”部分来确定响应体类型。Postman通常会根据响应的内容类型自动解析响应体类型，并以适当的方式显示数据。

如果您需要处理特定类型的响应体，例如解析JSON或提取特定的信息，Postman提供了相应的功能和工具来帮助您处理不同类型的响应。

## CAS

CAS（Central Authentication Service）是一个开源的企业级单点登录解决方案，提供了统一的身份认证和授权服务。它的核心思想是将认证服务从应用中独立出来，通过一个单独的认证中心来处理用户的身份验证请求，从而实现多个应用之间的单点登录（SSO）。

以下是 CAS 的一些重要特性和详解：

1. **单点登录（SSO）**：
   - CAS 提供了单点登录功能，用户只需在 CAS 认证中心登录一次，即可在同一域下的所有应用中访问，无需重复登录。
   - 用户登录后，CAS 会颁发一个票据（Ticket），应用可以通过票据向 CAS 验证用户身份。

2. **统一认证管理**：
   - CAS 提供了统一的身份认证和授权管理，将认证逻辑集中到一个独立的认证中心。
   - 开发者可以在 CAS 中配置用户认证方式、授权策略等，实现统一的身份管理。

3. **多种认证方式**：
   - CAS 支持多种认证方式，包括基于用户名密码的表单认证、LDAP 认证、数据库认证等。
   - 开发者可以根据项目需求选择合适的认证方式，并进行相应的配置。

4. **单点登出（SLO）**：
   - CAS 提供了单点登出功能，用户在任一应用注销时，CAS 可以通知其他应用注销当前用户的会话。
   - 这样可以确保用户在整个会话中只需登录一次，提高用户体验。

5. **安全性**：
   - CAS 采用了多种安全机制，包括票据验证、加密传输、防止重放攻击等，保障用户身份和数据的安全性。
   - 开发者可以通过配置加强 CAS 的安全性，确保认证过程的可靠性和安全性。

6. **可扩展性**：
   - CAS 是一个开源项目，提供了丰富的扩展点和定制选项，可以根据需求进行定制和扩展。
   - 开发者可以通过插件、扩展、自定义认证处理器等方式扩展 CAS 的功能和特性。

总的来说，CAS 是一个功能强大、安全可靠的单点登录解决方案，可以帮助企业实现统一的身份认证和授权管理，提高用户体验，简化开发和维护工作。

**使用示例**

使用 CAS 作为 Spring Boot Security 的身份认证方案，需要进行一些配置。以下是一个简单的示例，演示了如何将 CAS 整合到 Spring Boot Security 中：

```
java复制代码import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.cas.ServiceProperties;
import org.springframework.security.cas.authentication.CasAssertionAuthenticationToken;
import org.springframework.security.cas.web.CasAuthenticationEntryPoint;
import org.springframework.security.cas.web.authentication.ServiceAuthenticationDetailsSource;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.web.authentication.logout.LogoutFilter;
import org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler;

@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
                .antMatchers("/public/**").permitAll() // 允许访问公开资源
                .anyRequest().authenticated() // 其他请求需要认证
                .and()
            .logout()
                .logoutUrl("/logout") // 登出路径
                .permitAll() // 登出不需要认证
                .and()
            .addFilterBefore(casLogoutFilter(), LogoutFilter.class)
            .exceptionHandling()
                .authenticationEntryPoint(casAuthenticationEntryPoint());
    }

    @Bean
    public CasAuthenticationEntryPoint casAuthenticationEntryPoint() {
        CasAuthenticationEntryPoint entryPoint = new CasAuthenticationEntryPoint();
        entryPoint.setLoginUrl("https://your-cas-server.com/login");
        entryPoint.setServiceProperties(serviceProperties());
        return entryPoint;
    }

    @Bean
    public ServiceProperties serviceProperties() {
        ServiceProperties serviceProperties = new ServiceProperties();
        serviceProperties.setService("https://your-application.com/login/cas");
        serviceProperties.setSendRenew(false);
        return serviceProperties;
    }

    @Bean
    public CasLogoutFilter casLogoutFilter() {
        CasLogoutFilter filter = new CasLogoutFilter("https://your-cas-server.com/logout");
        filter.setLogoutRequestMatcher(new AntPathRequestMatcher("/logout"));
        filter.setLogoutSuccessUrl("/logged-out");
        filter.setFilterProcessesUrl("/logout");
        filter.setServiceProperties(serviceProperties());
        return filter;
    }
}
```

上述配置示例中，假设 CAS 服务器位于 "[https://your-cas-server.com](https://your-cas-server.com/)"，而你的应用位于 "[https://your-application.com](https://your-application.com/)"。你需要将这些 URL 替换为实际的 CAS 服务器和应用程序的 URL。

这个配置示例演示了如何配置 CAS 认证入口点、服务属性以及 CAS 登出过滤器。请根据实际情况进行相应的修改和配置。

同时，你需要在 Spring Boot 项目的配置文件中配置 CAS 服务器的地址、CAS 客户端的信息等相关信息。

### CaSSOFilter

`CasSSOFilter` 过滤器是 CAS（Central Authentication Service）单点登录系统中的一个重要组成部分，用于处理单点登录相关的功能。它的主要作用是拦截用户的登录请求，将其重定向到 CAS 服务器进行统一认证，并处理 CAS 服务器返回的认证结果，最终完成用户在当前系统的登录操作。

具体运用包括：

1. **用户认证**：当用户在系统中进行登录时，`CasSSOFilter` 拦截登录请求，并将用户重定向到 CAS 服务器进行认证。CAS 服务器验证用户身份后，会返回认证成功或失败的结果。

2. **处理认证结果**：根据 CAS 服务器返回的认证结果，`CasSSOFilter` 负责处理用户的登录状态。如果认证成功，用户将被授权访问系统资源；如果认证失败，可能会要求用户重新进行登录或给出相应的错误提示。

3. **单点登录**：通过 CAS 协议，`CasSSOFilter` 实现了单点登录的功能。用户在一个系统中进行登录后，可以在其他系统中自动完成登录，无需重复输入用户名和密码。

4. **会话管理**：`CasSSOFilter` 可能会涉及到会话管理的功能，例如在用户登录成功后，创建或更新用户的会话信息，以及在用户注销时清理会话数据等。

5. **权限控制**：在认证成功后，`CasSSOFilter` 可能会根据用户的权限配置，决定用户能够访问的资源范围，从而实现权限控制的功能。

总的来说，`CasSSOFilter` 运用于 CAS 单点登录系统中，负责拦截用户的登录请求，与 CAS 服务器进行认证交互，并根据认证结果处理用户的登录状态，从而实现单点登录和统一认证的功能。

### SingleSignOutHttpSessionListener

`SingleSignOutHttpSessionListener` 是 CAS（Central Authentication Service）单点登录系统中的一个监听器，用于监听用户会话的销毁事件，从而实现单点登出功能。

具体作用包括：

1. **监听会话销毁事件**：`SingleSignOutHttpSessionListener` 监听用户会话销毁事件，即用户在任意一个系统中注销登录时触发的事件。

2. **发送单点登出请求**：当用户在某个系统中注销登录时，该监听器会收到会话销毁事件，并向 CAS 服务器发送单点登出请求，通知 CAS 服务器注销该用户在其他相关系统中的登录状态。

3. **实现单点登出**：CAS 服务器收到单点登出请求后，会立即注销用户在其他相关系统中的登录状态，从而实现用户在整个系统中的单点登出。

4. **保障安全性**：单点登出功能有助于保障系统的安全性，确保用户在注销登录后不能再访问系统中的受保护资源，从而减少安全风险。

5. **提升用户体验**：单点登出功能简化了用户的操作流程，用户只需要在一个系统中进行注销操作，就能够在所有相关系统中完成退出登录，提升了用户的体验和便利性。

总的来说，`SingleSignOutHttpSessionListener` 的作用是监听用户会话的销毁事件，实现单点登出功能，保障系统的安全性并提升用户体验。

### **Ticket Granting Ticket (TGT)**

TGT 是 CAS 中的一个重要概念，用于表示用户在 CAS 服务器上的登录凭证。用户在第一次登录时，CAS 服务器会颁发一个 TGT，然后使用 TGT 来获取服务票据（Service Ticket）进行单点登录。

### **Service Ticket (ST)**

ST 是 CAS 中的另一个重要概念，用于表示用户访问特定服务的令牌。用户在获得 TGT 后，可以使用 TGT 来向 CAS 服务器请求 ST，然后使用 ST 来访问受保护的服务。